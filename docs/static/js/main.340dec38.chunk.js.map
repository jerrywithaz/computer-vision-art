{"version":3,"sources":["App.styled.tsx","utils/calculateAspectRatioFit/calculateAspectRatioFit.ts","hooks/useZoomAndPan/useZoomAndPan.tsx","utils/dataURItoBlob/dataURItoBlob.ts","utils/downloadURI/downloadURI.ts","providers/ImageProvider/ImageProvider.tsx","components/Canvas/Canvas.styled.ts","components/Canvas/Canvas.tsx","components/GlobalStyles/GlobalStyles.tsx","hooks/useIsMounted/useIsMounted.ts","hooks/usePromise/usePromise.ts","hooks/useCannyEdges/useCannyEdges.ts","utils/randomInteger/randomInteger.ts","features/Sidebar/Sidebar.styled.ts","features/Sidebar/Sidebar.tsx","features/Header/Header.styled.ts","features/Header/Header.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Content","Layout","AppContainer","styled","AppContent","calculateAspectRatioFit","srcWidth","srcHeight","maxWidth","maxHeight","ratio","Math","min","width","height","useZoomAndPan","ref","useRef","useState","x","y","scale","scaleFactor","mouse","dragging","state","setState","pan","useCallback","e","offsetX","clientX","offsetY","clientY","preventDefault","zoom","zoomIn","reset","newScale","onMouseDown","onMouseMove","requestAnimationFrame","mouseIsMoving","wasLeftClick","buttons","onMouseUp","onMouseWheel","current","parentElement","mouseX","pageX","offsetLeft","mouseY","pageY","offsetTop","mousePointTo","deltaY","newPosition","addEventListeners","addEventListener","removeEventListeners","removeEventListener","setZoomRef","el","useEffect","fitToContainer","containerWidth","containerHeight","alignCenter","referenceWidth","referenceHeight","refWidth","undefined","clientWidth","refHeight","clientHeight","newWidth","newHeight","newX","newY","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","type","downloadURI","uri","name","blob","link","document","createElement","download","href","URL","createObjectURL","body","appendChild","click","removeChild","revokeObjectURL","ImageProviderContext","React","createContext","useImageProvider","context","useContext","Error","ImageProvider","children","setURI","dimensions","setDimensions","stageRef","setStageRef","value","downloadImage","stageRefClone","clone","containerGroup","find","toArray","toDataURL","mimeType","quality","Provider","CanvasContainer","div","Canvas","setContainerWidth","setContainerHeight","handleRef","fillLinearGradientStartPoint","fillLinearGradientEndPoint","fillLinearGradientColorStops","GlobalStyles","createGlobalStyle","useIsMounted","isMounted","checker","usePromise","promise","Promise","resolve","reject","then","result","catch","error","useCannyEdges","safePromise","a","axios","post","data","url","get","points","randomInteger","max","floor","random","Sider","SidebarContainer","SubMenu","Menu","Sidebar","theme","mode","defaultSelectedKeys","defaultOpenKeys","style","borderRight","title","Item","Header","HeaderContainer","HeaderLogo","Typography","Title","level","onClick","App","getCannyEdges","components","setComponents","className","onChange","files","target","reader","FileReader","file","onload","minThreshold","maxThreshold","useL2Gradient","useRigidLines","lines","temp_components","red","green","blue","stroke","push","strokeWidth","readAsDataURL","accept","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.340dec38.chunk.js","sourcesContent":["import styled from 'styled-components';\nimport { Layout } from 'antd';\n\nconst { Content } = Layout;\n\nexport const AppContainer = styled(Layout)`\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n`;\n\nexport const AppContent = styled(Content)`\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n`;","\nfunction calculateAspectRatioFit(srcWidth: number, srcHeight: number, maxWidth: number, maxHeight: number) {\n\n    var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n  \n    return { \n        ratio: ratio,\n        width: srcWidth*ratio, \n        height: srcHeight*ratio \n    };\n  \n}\n\nexport default calculateAspectRatioFit;","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport calculateAspectRatioFit from \"../../utils/calculateAspectRatioFit\";\n\nfunction useZoomAndPan() {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [state, setState] = useState({\n    x: 0,\n    y: 0,\n    scale: 1,\n    width: 0,\n    height: 0,\n    scaleFactor: 1.25,\n    mouse: {\n      x: 0,\n      y: 0,\n      dragging: false,\n    },\n  });\n\n  const fitToContainer = (\n    containerWidth: number,\n    containerHeight: number,\n    alignCenter: boolean = true,\n    referenceWidth?: number,\n    referenceHeight?: number\n  ) => {\n    if (ref.current) {\n      const refWidth =\n        referenceWidth !== undefined ? referenceWidth : ref.current.clientWidth;\n      const refHeight =\n        referenceHeight !== undefined\n          ? referenceHeight\n          : ref.current.clientHeight;\n\n      const { width, height } = calculateAspectRatioFit(\n        refWidth,\n        refHeight,\n        containerWidth,\n        containerHeight\n      );\n\n      const scale = width / refWidth;\n      const newScale = scale > 1 ? 1 : scale;\n      const newWidth = scale > 1 ? refWidth : width;\n      const newHeight = scale > 1 ? refHeight : height;\n      const newX = alignCenter ? (containerWidth - newWidth) / 2 : 0;\n      const newY = alignCenter ? (containerHeight - newHeight) / 2 : 0;\n\n      setState({\n        ...state,\n        scale: newScale,\n        width: newWidth,\n        height: newHeight,\n        x: newX,\n        y: newY,\n      });\n    }\n  };\n\n  const pan = useCallback(\n    (e: MouseEvent) => {\n      const { mouse, x, y } = state;\n      const offsetX = e.clientX - mouse.x + x;\n      const offsetY = e.clientY - mouse.y + y;\n\n      e.preventDefault();\n\n      setState({\n        ...state,\n        mouse: {\n          dragging: true,\n          x: e.clientX,\n          y: e.clientY,\n        },\n        x: offsetX,\n        y: offsetY,\n      });\n    },\n    [state]\n  );\n\n  const zoom = useCallback(\n    (zoomIn: boolean, reset: boolean = false) => {\n      const { scale, scaleFactor } = state;\n\n      let newScale = scale;\n\n      if (reset) {\n        newScale = 1;\n      } else {\n        if (zoomIn) {\n          newScale *= scaleFactor;\n        } else if (newScale > 0.1) {\n          newScale /= scaleFactor;\n        }\n      }\n\n      setState({\n        ...state,\n        scale: newScale,\n      });\n    },\n    [state]\n  );\n\n  const onMouseDown = useCallback(\n    (e: MouseEvent) => {\n      setState({\n        ...state,\n        mouse: {\n          x: e.clientX,\n          y: e.clientY,\n          dragging: true,\n        },\n      });\n    },\n    [state]\n  );\n\n  const onMouseMove = useCallback(\n    (e: MouseEvent) => {\n      requestAnimationFrame(() => {\n        const mouseIsMoving = state.mouse.dragging;\n        const wasLeftClick = e.buttons === 1;\n        if (mouseIsMoving && wasLeftClick) {\n          pan(e);\n        }\n      });\n    },\n    [pan, state.mouse.dragging]\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      setState({\n        ...state,\n        mouse: {\n          x: 0,\n          y: 0,\n          dragging: false,\n        },\n      });\n    },\n    [state]\n  );\n\n  const onMouseWheel = useCallback(\n    (e: WheelEvent) => {\n      requestAnimationFrame(() => {\n        if (ref.current && ref.current.parentElement) {\n          const { scale, x, y, scaleFactor } = state;\n\n          const mouseX = e.pageX - ref.current.parentElement.offsetLeft;\n          const mouseY = e.pageY - ref.current.parentElement.offsetTop;\n\n          const mousePointTo = {\n            x: mouseX / scale - x / scale,\n            y: mouseY / scale - y / scale,\n          };\n\n          const newScale =\n            e.deltaY > 0 ? scale * scaleFactor : scale / scaleFactor;\n\n          const newPosition = {\n            x: -(mousePointTo.x - mouseX / newScale) * newScale,\n            y: -(mousePointTo.y - mouseY / newScale) * newScale,\n          };\n\n          setState({\n            ...state,\n            x: newPosition.x,\n            y: newPosition.y,\n            scale: newScale,\n          });\n        }\n      });\n    },\n    [state]\n  );\n\n  const addEventListeners = useCallback(() => {\n    if (ref.current) {\n      ref.current.addEventListener(\"wheel\", onMouseWheel);\n      ref.current.addEventListener(\"mousedown\", onMouseDown);\n      ref.current.addEventListener(\"mousemove\", onMouseMove);\n      ref.current.addEventListener(\"mouseup\", onMouseUp);\n    }\n  }, [onMouseDown, onMouseMove, onMouseUp, onMouseWheel]);\n\n  const removeEventListeners = useCallback(() => {\n    if (ref.current) {\n      ref.current.removeEventListener(\"wheel\", onMouseWheel);\n      ref.current.removeEventListener(\"mousedown\", onMouseDown);\n      ref.current.removeEventListener(\"mousemove\", onMouseMove);\n      ref.current.removeEventListener(\"mouseup\", onMouseUp);\n    }\n  }, [onMouseDown, onMouseMove, onMouseUp, onMouseWheel]);\n\n  const setZoomRef = useCallback(\n    (el: HTMLDivElement | null) => {\n      if (el) {\n        ref.current = el;\n        addEventListeners();\n      }\n    },\n    [addEventListeners]\n  );\n\n  useEffect(() => {\n    return function cleanup() {\n      removeEventListeners();\n    };\n  }, [removeEventListeners]);\n\n  return { setZoomRef, zoom, pan, fitToContainer, ...state };\n}\n\nexport default useZoomAndPan;\n","function dataURItoBlob(dataURI: string) {\n    // convert base64 to raw binary data held in a string\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n    var byteString = atob(dataURI.split(',')[1]);\n  \n    // separate out the mime component\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\n  \n    // write the bytes of the string to an ArrayBuffer\n    var ab = new ArrayBuffer(byteString.length);\n  \n    // create a view into the buffer\n    var ia = new Uint8Array(ab);\n  \n    // set the bytes of the buffer to the correct values\n    for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n  \n    return new Blob([ab], {type: mimeString});\n  \n  }\n\n  export default dataURItoBlob;","import dataURItoBlob from \"./../dataURItoBlob\";\n\nfunction downloadURI(uri: string, name: string) {\n\n    const blob = dataURItoBlob(uri);\n    const link = document.createElement('a');\n\n    link.download = name;\n    link.href = URL.createObjectURL(blob);\n\n    document.body.appendChild(link);\n\n    link.click();\n\n    document.body.removeChild(link);\n\n    URL.revokeObjectURL(link.href);\n\n};\n\nexport default downloadURI;","import React, { FunctionComponent, useContext, useState } from 'react';\nimport downloadURI from '../../utils/downloadURI';\n\ntype Dimension = {\n    width: number;\n    height: number;\n};\n\ntype ImageProviderContextProps = {\n    downloadImage: VoidFunction;\n    setURI: (uri: string) => void;\n    setDimensions: (dimensions: Dimension) => void;\n    setStageRef: (ref: any) => void;\n    uri: string | null;\n    width: number;\n    height: number;\n};\n\nconst ImageProviderContext = React.createContext<ImageProviderContextProps | undefined>(undefined);\n\nconst ImageProvider: FunctionComponent = ({ children }) => {\n    const [uri, setURI] = useState<string | null>(null);\n    const [dimensions, setDimensions] = useState<Dimension>({ width: 0, height: 0 });\n    const [stageRef, setStageRef] = useState<any>(null);\n    const { width, height } = dimensions;\n    \n    const downloadImage = () => {\n        if (stageRef && uri && width && height) {\n    \n            const stageRefClone = stageRef.clone();\n            const containerGroup = stageRefClone.find(\"Group\").toArray()[0];\n                        \n            stageRefClone.width(width);\n            stageRefClone.height(height);\n    \n            containerGroup.scale({x: 1, y: 1});\n            containerGroup.x(0);\n            containerGroup.y(0);\n    \n            const uri = stageRefClone.toDataURL({\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                mimeType: \"image/png\",\n                quality: 1\n            });\n            \n            downloadURI(uri, \"image.png\");\n    \n        }\n      }\n\n    const value = {\n        setURI,\n        setStageRef,\n        uri,\n        setDimensions,\n        downloadImage,\n        width,\n        height\n    };\n\n    return (\n        <ImageProviderContext.Provider value={value}>\n            {children}\n        </ImageProviderContext.Provider>\n    );\n}\n\nexport function useImageProvider(): ImageProviderContextProps {\n    const context = useContext(ImageProviderContext);\n\n    if (context === undefined) {\n        throw new Error('');\n    }\n\n    return context;\n}\n\nexport default ImageProvider;","import styled from 'styled-components';\n\nexport const CanvasContainer = styled.div`\n    width: 100%;\n    flex: 1;\n`;","import React, { FunctionComponent, useCallback, useState } from \"react\";\nimport { Group, Layer, Stage, Rect } from \"react-konva\";\nimport useZoomAndPan from \"../../hooks/useZoomAndPan\";\nimport { useImageProvider } from \"../../providers/ImageProvider\";\nimport { CanvasContainer } from \"./Canvas.styled\";\n\ntype CanvasProps = {\n  width: number;\n  height: number;\n};\n\nconst Canvas: FunctionComponent<CanvasProps> = ({\n  children,\n  width,\n  height,\n}) => {\n  const [containerWidth, setContainerWidth] = useState<number>(0);\n  const [containerHeight, setContainerHeight] = useState<number>(0);\n  const { setStageRef } = useImageProvider();\n  const { scale, x, y, setZoomRef } = useZoomAndPan();\n\n  const handleRef = useCallback(\n    (el: HTMLDivElement | null) => {\n      if (el) {\n        setContainerWidth(el.clientWidth);\n        setContainerHeight(el.clientHeight);\n        setZoomRef(el);\n      }\n    },\n    [setZoomRef]\n  );\n\n  return (\n    <CanvasContainer ref={handleRef}>\n      <Stage height={containerHeight} width={containerWidth} ref={setStageRef}>\n        <Layer>\n          <Group\n            height={height * scale}\n            width={width * scale}\n            scale={{ x: scale, y: scale }}\n            x={x}\n            y={y}\n          >\n            <Rect\n              x={0}\n              y={0}\n              width={width}\n              height={height}\n              fillLinearGradientStartPoint={{ x: 0, y: height / 2 }}\n              fillLinearGradientEndPoint={{ x: width, y: height / 2 }}\n              fillLinearGradientColorStops={[0, \"#1D2951\", 1, \"#000000\"]}\n            />\n            {children}\n          </Group>\n        </Layer>\n      </Stage>\n    </CanvasContainer>\n  );\n};\n\nexport default Canvas;\n","import { createGlobalStyle } from \"styled-components\";\n\nconst GlobalStyles = createGlobalStyle`\n    html, \n    body,\n    #root {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n    body {\n        margin: 0px;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n            sans-serif;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n`;\n\nexport default GlobalStyles;\n","import { useCallback, useEffect, useRef } from \"react\";\n\nfunction useIsMounted(): () => boolean {\n  const isMounted = useRef(false);\n\n  const checker = useCallback((): boolean => {\n    return isMounted.current;\n  }, []);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return function cleanup() {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return checker;\n}\n\nexport default useIsMounted;\n","import useIsMounted from \"../useIsMounted\";\n\n/** Creates a safe promise that will only resolve or reject if the component is still mounted */\nfunction usePromise(): <Result extends any = any>(\n  promise: Promise<Result>\n) => Promise<Result> {\n  const isMounted = useIsMounted();\n\n  function creator<Result extends any = any>(promise: Promise<Result>) {\n    return new Promise<Result>((resolve, reject) => {\n      promise\n        .then((result) => {\n          if (isMounted()) {\n            resolve(result);\n          }\n        })\n        .catch((error) => {\n          if (isMounted()) {\n            reject(error);\n          }\n        });\n    });\n  }\n\n  return creator;\n}\n\nexport default usePromise;\n","import { useCallback } from \"react\";\nimport axios from \"axios\";\nimport usePromise from \"../usePromise\";\n\nconst api_url =\n  \"https://bxjc2f8yt0.execute-api.us-east-2.amazonaws.com/calculate_canny_edges\";\n\ntype CannyEdgeApiArgs = {\n  url: string;\n  minThreshold: number;\n  maxThreshold: number;\n  useL2Gradient: boolean;\n  useRigidLines: boolean;\n};\n\ntype CannyEdgeApiResponse = {\n  url: string;\n  width: number;\n  height: number;\n};\n\ntype CannyEdgeApiJSON = {\n  points: number[][];\n};\n\nfunction useCannyEdges() {\n  const safePromise = usePromise();\n  \n  const getCannyEdges = useCallback(\n    async (body: CannyEdgeApiArgs) => {\n      try {\n        const { data: { url, width, height  } } = await safePromise(\n          axios.post<CannyEdgeApiResponse>(api_url, body)\n        );\n        const { data: { points } } = await safePromise(\n          axios.get<CannyEdgeApiJSON>(url)\n        );\n        return { points, width, height  };\n      } catch (error) {\n        return { points: [], width: 0, height: 0 };\n      }\n    },\n    [safePromise]\n  );\n\n  return getCannyEdges;\n}\n\nexport default useCannyEdges;\n","function randomInteger(min: number, max: number): number {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport default randomInteger;","import styled from 'styled-components';\nimport { Layout } from \"antd\";\n\nconst { Sider } = Layout;\n\nexport const SidebarContainer = styled(Sider)``;","import React from \"react\";\nimport { Menu } from \"antd\";\nimport { SidebarContainer } from \"./Sidebar.styled\";\n\nconst { SubMenu } = Menu;\n\nconst Sidebar = () => {\n  return (\n    <SidebarContainer width={200} theme=\"light\">\n      <Menu\n        mode=\"inline\"\n        defaultSelectedKeys={[\"1\"]}\n        defaultOpenKeys={[\"sub1\"]}\n        style={{ borderRight: 0 }}\n      >\n        <SubMenu key=\"sub1\" title=\"My Images\">\n          <Menu.Item key=\"1\">option1</Menu.Item>\n          <Menu.Item key=\"2\">option2</Menu.Item>\n          <Menu.Item key=\"3\">option3</Menu.Item>\n          <Menu.Item key=\"4\">option4</Menu.Item>\n        </SubMenu>\n      </Menu>\n    </SidebarContainer>\n  );\n};\n\nexport default Sidebar;\n","import { Layout, Typography } from \"antd\";\nimport styled from 'styled-components';\n\nconst { Header } = Layout;\n\nexport const HeaderContainer = styled(Header)`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n\nexport const HeaderLogo = styled(Typography.Title)`\n    && {\n        color: #ffffff;\n        margin: 0px;\n    }\n`;","import React from \"react\";\nimport { Button } from \"antd\";\nimport { useImageProvider } from \"../../providers/ImageProvider\";\nimport { HeaderContainer, HeaderLogo } from \"./Header.styled\";\n\nconst Header = () => {\n  const { downloadImage } = useImageProvider();\n\n  return (\n    <HeaderContainer>\n      <HeaderLogo level={1}>JerryWithaZ</HeaderLogo>\n      <Button type=\"primary\" onClick={downloadImage}>\n        Download Image\n      </Button>\n    </HeaderContainer>\n  );\n};\n\nexport default Header;\n","import React, { useState } from \"react\";\nimport { Line } from \"react-konva\";\nimport { Layout } from \"antd\";\nimport { AppContainer, AppContent } from \"./App.styled\";\nimport Canvas from \"./components/Canvas\";\nimport GlobalStyles from \"./components/GlobalStyles\";\nimport useCannyEdges from \"./hooks/useCannyEdges\";\nimport { useImageProvider } from \"./providers/ImageProvider\";\nimport randomInteger from \"./utils/randomInteger\";\nimport Sidebar from \"./features/Sidebar\";\nimport Header from \"./features/Header\";\n\nfunction App() {\n  const getCannyEdges = useCannyEdges();\n  const [components, setComponents] = useState<JSX.Element[]>([]);\n  const { setURI, setDimensions, width, height, uri } = useImageProvider();\n\n  const handleUpload = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files) {\n      const reader = new FileReader();\n      const file = files[0];\n\n      reader.onload = (e) => {\n        const result = e.target?.result as string;\n\n        setURI(result);\n\n        getCannyEdges({\n          url: result,\n          minThreshold: 20,\n          maxThreshold: 50,\n          useL2Gradient: true,\n          useRigidLines: true,\n        }).then(({ points: lines, width, height }) => {\n          const temp_components = [];\n\n          for (let i = 0; i < lines.length; ++i) {\n            const points = lines[i];\n\n            const red = randomInteger(0, 255);\n            const green = randomInteger(0, 255);\n            const blue = randomInteger(0, 255);\n            const stroke = `rgb(${red}, ${green}, ${blue})`;\n\n            temp_components.push(\n              <Line key={i} points={points} stroke={stroke} strokeWidth={2} />\n            );\n          }\n\n          setComponents(temp_components);\n          setDimensions({ width, height });\n        });\n      };\n\n      reader.readAsDataURL(file);\n    }\n  };\n\n  return (\n    <AppContainer>\n      <GlobalStyles />\n      <Header />\n      <Layout>\n        <Sidebar />\n        <Layout>\n          <AppContent className=\"site-layout-background\">\n            {!uri && (\n              <>\n                <h1>Upload file</h1>\n                <input\n                  type=\"file\"\n                  onChange={handleUpload}\n                  name=\"image\"\n                  accept=\"image/*\"\n                />\n              </>\n            )}\n            <Canvas width={width} height={height}>\n              {components}\n            </Canvas>\n          </AppContent>\n        </Layout>\n      </Layout>\n    </AppContainer>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport ImageProvider from './providers/ImageProvider';\nimport reportWebVitals from './reportWebVitals';\n\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ImageProvider>\n      <App />\n    </ImageProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}