(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{290:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n(0),i=n.n(r),c=n(25),u=n.n(c),o=n(67),l=n.n(o),s=n(28),h=n(157),b=n(83),d=n(60),f=n(29),j=n(30),g=n(298);function O(){var e=Object(f.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n"]);return O=function(){return e},e}function v(){var e=Object(f.a)(["\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n"]);return v=function(){return e},e}var m=g.a.Content,x=Object(j.b)(g.a)(v());Object(j.b)(m)(O());function p(){var e=Object(f.a)(["\n    html, \n    body,\n    #root {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n    body {\n        margin: 0px;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n            sans-serif;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n"]);return p=function(){return e},e}var y=Object(j.a)(p()),w=n(109),C=n.n(w);var k=function(){var e=Object(r.useRef)(!1),t=Object(r.useCallback)((function(){return e.current}),[]);return Object(r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),t};var L=function(){var e=k();return function(t){return new Promise((function(n,a){t.then((function(t){e()&&n(t)})).catch((function(t){e()&&a(t)}))}))}};var S=function(){var e=L();return Object(r.useCallback)(function(){var t=Object(b.a)(l.a.mark((function t(n){var a,r,i,c,u,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e(C.a.post("https://bxjc2f8yt0.execute-api.us-east-2.amazonaws.com/calculate_canny_edges",n));case 3:return a=t.sent,r=a.data,i=r.url,c=r.width,u=r.height,t.next=10,e(C.a.get(i));case 10:return o=t.sent,s=o.data.points,t.abrupt("return",{points:s,width:c,height:u});case 15:return t.prev=15,t.t0=t.catch(0),t.abrupt("return",{points:[],width:0,height:0});case 18:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),[e])};var E=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},R=n(110),F=n(36);var T=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(t.length),r=new Uint8Array(a),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return new Blob([a],{type:n})};var U=function(e,t){var n=T(e),a=document.createElement("a");a.download=t,a.href=URL.createObjectURL(n),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(a.href)},I=i.a.createContext(void 0);function V(){var e=Object(r.useContext)(I);if(void 0===e)throw new Error("");return e}var D=function(e){var t=e.children,n=Object(r.useState)(null),i=Object(F.a)(n,2),c=i[0],u=i[1],o=Object(r.useState)({width:0,height:0}),l=Object(F.a)(o,2),s=l[0],h=l[1],b=Object(r.useState)(null),d=Object(F.a)(b,2),f=d[0],j=d[1],g=s.width,O=s.height,v={setURI:u,setStageRef:j,uri:c,setDimensions:h,downloadImage:function(){if(f&&c&&g&&O){var e=f.clone(),t=e.find("Group").toArray()[0];e.width(g),e.height(O),t.scale({x:1,y:1}),t.x(0),t.y(0);var n=e.toDataURL({x:0,y:0,width:g,height:O,mimeType:"image/png",quality:1});U(n,"image.png")}},width:g,height:O};return Object(a.jsx)(I.Provider,{value:v,children:t})},A=n(296);function G(){var e=Object(f.a)(["\n    && {\n        color: #ffffff;\n        margin: 0px;\n        font-size: 24px;\n    }\n"]);return G=function(){return e},e}function M(){var e=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n"]);return M=function(){return e},e}var Y=g.a.Header,P=Object(j.b)(Y)(M()),z=Object(j.b)(A.a.Title)(G()),B=function(){var e=V().downloadImage;return Object(a.jsxs)(P,{children:[Object(a.jsx)(z,{level:1,children:"JerryWithaZ"}),Object(a.jsx)(R.a,{type:"primary",onClick:e,children:"Download Image"})]})},H=n(82),W=n(155),X=n(294),q=n(300);var J=function(e,t,n,a){var r=Math.min(n/e,a/t);return{ratio:r,width:e*r,height:t*r}};var Z=function(){var e=Object(r.useRef)(null),t=Object(r.useState)({x:0,y:0,scale:1,width:0,height:0,scaleFactor:1.25,mouse:{x:0,y:0,dragging:!1}}),n=Object(F.a)(t,2),a=n[0],i=n[1],c=Object(r.useCallback)((function(e){var t=a.mouse,n=a.x,r=a.y,c=e.clientX-t.x+n,u=e.clientY-t.y+r;e.preventDefault(),i(Object(s.a)(Object(s.a)({},a),{},{mouse:{dragging:!0,x:e.clientX,y:e.clientY},x:c,y:u}))}),[a]),u=Object(r.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a.scale,r=a.scaleFactor,c=n;t?c=1:e?c*=r:c>.1&&(c/=r),i(Object(s.a)(Object(s.a)({},a),{},{scale:c}))}),[a]),o=Object(r.useCallback)((function(e){i(Object(s.a)(Object(s.a)({},a),{},{mouse:{x:e.clientX,y:e.clientY,dragging:!0}}))}),[a]),l=Object(r.useCallback)((function(e){requestAnimationFrame((function(){var t=a.mouse.dragging,n=1===e.buttons;t&&n&&c(e)}))}),[c,a.mouse.dragging]),h=Object(r.useCallback)((function(e){i(Object(s.a)(Object(s.a)({},a),{},{mouse:{x:0,y:0,dragging:!1}}))}),[a]),b=Object(r.useCallback)((function(t){requestAnimationFrame((function(){if(e.current&&e.current.parentElement){var n=a.scale,r=a.x,c=a.y,u=a.scaleFactor,o=t.pageX-e.current.parentElement.offsetLeft,l=t.pageY-e.current.parentElement.offsetTop,h={x:o/n-r/n,y:l/n-c/n},b=t.deltaY>0?n*u:n/u,d={x:-(h.x-o/b)*b,y:-(h.y-l/b)*b};i(Object(s.a)(Object(s.a)({},a),{},{x:d.x,y:d.y,scale:b}))}}))}),[a]),d=Object(r.useCallback)((function(){e.current&&(e.current.addEventListener("wheel",b),e.current.addEventListener("mousedown",o),e.current.addEventListener("mousemove",l),e.current.addEventListener("mouseup",h))}),[o,l,h,b]),f=Object(r.useCallback)((function(){e.current&&(e.current.removeEventListener("wheel",b),e.current.removeEventListener("mousedown",o),e.current.removeEventListener("mousemove",l),e.current.removeEventListener("mouseup",h))}),[o,l,h,b]),j=Object(r.useCallback)((function(t){t&&(e.current=t,d())}),[d]);return Object(r.useEffect)((function(){return function(){f()}}),[f]),Object(s.a)({setZoomRef:j,zoom:u,pan:c,fitToContainer:function(t,n){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],c=arguments.length>3?arguments[3]:void 0,u=arguments.length>4?arguments[4]:void 0;if(e.current){var o=void 0!==c?c:e.current.clientWidth,l=void 0!==u?u:e.current.clientHeight,h=J(o,l,t,n),b=h.width,d=h.height,f=b/o,j=f>1?1:f,g=f>1?o:b,O=f>1?l:d,v=r?(t-g)/2:0,m=r?(n-O)/2:0;i(Object(s.a)(Object(s.a)({},a),{},{scale:j,width:g,height:O,x:v,y:m}))}}},a)};function _(){var e=Object(f.a)(["\n    width: 100%;\n    flex: 1;\n"]);return _=function(){return e},e}var N=j.b.div(_()),K=function(e){var t=e.children,n=e.width,i=e.height,c=Object(r.useState)(0),u=Object(F.a)(c,2),o=u[0],l=u[1],s=Object(r.useState)(0),h=Object(F.a)(s,2),b=h[0],f=h[1],j=V().setStageRef,g=Z(),O=g.scale,v=g.x,m=g.y,x=g.setZoomRef,p=Object(r.useCallback)((function(e){e&&(l(e.clientWidth),f(e.clientHeight),x(e))}),[x]);return Object(a.jsx)(N,{ref:p,children:Object(a.jsx)(d.e,{height:b,width:o,ref:j,children:Object(a.jsx)(d.b,{children:Object(a.jsxs)(d.a,{height:i*O,width:n*O,scale:{x:O,y:O},x:v,y:m,children:[Object(a.jsx)(d.d,{x:0,y:0,width:n,height:i,fillLinearGradientStartPoint:{x:0,y:i/2},fillLinearGradientEndPoint:{x:n,y:i/2},fillLinearGradientColorStops:[0,"#1D2951",1,"#000000"]}),t]})})})})};function Q(){var e=Object(f.a)(["\n    padding: 32px;\n"]);return Q=function(){return e},e}function $(){var e=Object(f.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    position: relative;\n"]);return $=function(){return e},e}function ee(){var e=Object(f.a)(["\n    height: 100%;\n"]);return ee=function(){return e},e}var te=Object(j.b)(g.a)(ee()),ne=Object(j.b)(g.a.Content)($()),ae=j.b.div(Q());function re(){var e=Object(f.a)(["\n    padding: 32px 32px;\n"]);return re=function(){return e},e}var ie=g.a.Sider,ce=Object(j.b)(ie)(re()),ue=n(295),oe=n(299);function le(){var e=Object(f.a)(["\n    display: flex;\n    align-items: center;\n"]);return le=function(){return e},e}var se=j.b.div(le()),he=function(e){var t=e.initialValue,n=e.value,r=e.onChange,i=e.name;return Object(a.jsx)(se,{as:ue.a.Item,label:i,children:Object(a.jsx)(oe.a,{defaultChecked:t,checked:n,onChange:r})})},be=n(93),de=n.n(be),fe=n(297),je=function(e){var t=e.name,n=e.initialValue,i=e.onChange,c=e.min,u=e.max,o=Object(r.useState)(n),l=Object(F.a)(o,2),s=l[0],h=l[1];return Object(a.jsx)(ue.a.Item,{label:t,labelCol:{span:24},children:Object(a.jsx)(fe.a,{defaultValue:n,value:s,onChange:h,onAfterChange:de()(i,500),min:c,max:u})})},ge=function(e){var t=e.tools,n=e.onToolChange,r=e.values;return Object(a.jsx)(ce,{width:300,theme:"light",children:t.map((function(e){return"toggle"===e.type?Object(a.jsx)(he,{initialValue:e.initialValue,onChange:function(t){return n(e.key,t)},value:r[e.key],name:e.name},e.key):"range"===e.type?Object(a.jsx)(je,{initialValue:e.initialValue,onChange:function(t){return n(e.key,t)},value:r[e.key],name:e.name,max:e.max,min:e.min},e.key):null}))})},Oe=n(293);function ve(){var e=Object(f.a)(["\n    position: absolute;\n    z-index: 2;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    background: #f0f2f5;\n"]);return ve=function(){return e},e}var me=j.b.div(ve()),xe=function(){return Object(a.jsx)(me,{children:Object(a.jsx)(Oe.a,{})})};var pe=function(e){var t=e.tools,n=e.createImage,i=V(),c=i.setURI,u=i.setDimensions,o=i.width,l=i.height,h=i.uri,b=Object(r.useState)(!1),d=Object(F.a)(b,2),f=d[0],j=d[1],g=Object(r.useState)({}),O=Object(F.a)(g,2),v=O[0],m=O[1],x=Object(r.useState)(null),p=Object(F.a)(x,2),y=p[0],w=p[1],C=Object(r.useCallback)((function(e,t){m(Object(s.a)(Object(s.a)({},v),{},Object(H.a)({},e,t)))}),[v]),k=Object(r.useCallback)((function(e){j(!0),n(Object(s.a)(Object(s.a)({},v),{},{url:e})).then((function(e){var t=e.width,n=e.height,a=e.image;u({width:t,height:n}),w(a),j(!1)})).catch((function(){W.b.error("There was an error creating your image"),j(!1)}))}),[n,u,v]);return Object(r.useEffect)((function(){h&&k(h)}),[h,v,k]),Object(a.jsxs)(te,{children:[Object(a.jsx)(ge,{tools:t,onToolChange:C,values:v}),Object(a.jsxs)(ne,{children:[h?Object(a.jsx)(K,{width:o,height:l,children:y}):Object(a.jsx)(ae,{children:Object(a.jsx)(X.a,{accept:"image/*",onChange:function(e){e.file.originFileObj instanceof File?function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)}(e.file.originFileObj,(function(e){"string"===typeof e?(c(e),k(e)):W.b.error("You can only upload images.")})):W.b.error("You can only upload images.")},children:Object(a.jsx)(R.a,{icon:Object(a.jsx)(q.a,{}),children:"Click to Upload an Image"})})}),f&&Object(a.jsx)(xe,{})]})]})};var ye=function(){var e=S(),t=Object(r.useCallback)(function(){var t=Object(b.a)(l.a.mark((function t(n){var r,i,c,u,o,b,f,j,g,O,v,m,x;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.url,i=Object(h.a)(n,["url"]),t.next=3,e(Object(s.a)({url:r,minThreshold:50,maxThreshold:100,useL2Gradient:!0,useRigidLines:!0},i));case 3:for(c=t.sent,u=c.points,o=c.width,b=c.height,f=[],j=0;j<u.length;++j)g=u[j],O=E(0,255),v=E(0,255),m=E(0,255),x="rgb(".concat(O,", ").concat(v,", ").concat(m,")"),f.push(Object(a.jsx)(d.c,{points:g,stroke:x,strokeWidth:2},j));return t.abrupt("return",{width:o,height:b,image:f});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e]);return Object(a.jsxs)(x,{children:[Object(a.jsx)(y,{}),Object(a.jsx)(B,{}),Object(a.jsx)(pe,{tools:[{name:"Min Threshold",type:"range",key:"minThreshold",initialValue:50,min:0,max:100},{name:"Max Threshold",type:"range",key:"maxThreshold",initialValue:100,min:0,max:200},{name:"Use L2 Gradient",type:"toggle",key:"useL2Gradient",initialValue:!0},{name:"Use Rigid Lines",type:"toggle",key:"useRigidLines",initialValue:!0}],createImage:t})]})},we=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,301)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};n(289);u.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(D,{children:Object(a.jsx)(ye,{})})}),document.getElementById("root")),we()}},[[290,1,2]]]);
//# sourceMappingURL=main.4e40748c.chunk.js.map