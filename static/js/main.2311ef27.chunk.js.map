{"version":3,"sources":["App.styled.tsx","components/GlobalStyles/GlobalStyles.tsx","hooks/useIsMounted/useIsMounted.ts","hooks/usePromise/usePromise.ts","hooks/useCannyEdges/useCannyEdges.ts","utils/randomInteger/randomInteger.ts","utils/dataURItoBlob/dataURItoBlob.ts","utils/downloadURI/downloadURI.ts","providers/ImageProvider/ImageProvider.tsx","features/Header/Header.styled.ts","features/Header/Header.tsx","hooks/usePrevious/usePrevious.ts","hooks/useOnPropUpdated/useOnPropUpdated.ts","utils/calculateAspectRatioFit/calculateAspectRatioFit.ts","hooks/useZoomAndPan/useZoomAndPan.tsx","components/Canvas/Canvas.styled.ts","components/Canvas/Canvas.tsx","components/OpenCVPlayground/OpenCVPlayground.styled.ts","components/OpenCVPlayground/Sidebar/Sidebar.styled.ts","components/OpenCVPlayground/Toggle/Toggle.styled.ts","components/OpenCVPlayground/Toggle/Toggle.tsx","components/OpenCVPlayground/Range/Range.tsx","components/OpenCVPlayground/Sidebar/Sidebar.tsx","components/OpenCVPlayground/Spinner/Spinner.styled.ts","components/OpenCVPlayground/Spinner/Spinner.tsx","components/OpenCVPlayground/OpenCVPlayground.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Content","Layout","AppContainer","styled","GlobalStyles","createGlobalStyle","useIsMounted","isMounted","useRef","checker","useCallback","current","useEffect","usePromise","promise","Promise","resolve","reject","then","result","catch","error","useCannyEdges","safePromise","body","a","axios","post","data","url","width","height","get","points","randomInteger","min","max","Math","floor","random","dataURItoBlob","dataURI","byteString","atob","split","mimeString","ab","ArrayBuffer","length","ia","Uint8Array","i","charCodeAt","Blob","type","downloadURI","uri","name","blob","link","document","createElement","download","href","URL","createObjectURL","appendChild","click","removeChild","revokeObjectURL","ImageProviderContext","React","createContext","undefined","useImageProvider","context","useContext","Error","ImageProvider","children","useState","setURI","image","setImage","dimensions","setDimensions","stageRef","setStageRef","value","downloadImage","stageRefClone","clone","containerGroup","find","toArray","scale","x","y","toDataURL","mimeType","quality","removeImage","newImage","Image","onload","src","Provider","Header","HeaderContainer","HeaderLogo","Typography","Title","HeaderRow","Row","screens","useBreakpoint","isSmallScreen","Object","entries","filter","screen","align","justify","level","size","onClick","icon","CloseOutlined","color","DownloadOutlined","usePrevious","ref","useOnPropUpdated","currentValue","onChange","previousValue","calculateAspectRatioFit","srcWidth","srcHeight","maxWidth","maxHeight","ratio","useZoomAndPan","scaleFactor","mouse","dragging","state","setState","pan","e","offsetX","clientX","offsetY","clientY","preventDefault","zoom","zoomIn","reset","newScale","onMouseDown","onMouseMove","requestAnimationFrame","mouseIsMoving","wasLeftClick","buttons","onMouseUp","onMouseWheel","parentElement","mouseX","pageX","offsetLeft","mouseY","pageY","offsetTop","mousePointTo","deltaY","newPosition","addEventListeners","addEventListener","removeEventListeners","removeEventListener","setZoomRef","el","fitToContainer","containerWidth","containerHeight","alignCenter","referenceWidth","referenceHeight","refWidth","clientWidth","refHeight","clientHeight","newWidth","newHeight","newX","newY","CanvasContainer","div","Canvas","setContainerWidth","setContainerHeight","handleRef","_","currentImage","naturalWidth","naturalHeight","fillLinearGradientStartPoint","fillLinearGradientEndPoint","fillLinearGradientColorStops","OpenCVPlaygroundWrapper","OpenCVPlaygroundContent","OpenCVPlaygroundUpload","Sider","SidebarContainer","ToggleContainer","Toggle","initialValue","as","Form","Item","label","defaultChecked","checked","Range","internalValue","setInternalValue","labelCol","span","defaultValue","onAfterChange","debounce","Sidebar","tools","onToolChange","values","theme","breakpoint","collapsedWidth","map","tool","key","SpinnerContainer","Spinner","Text","OpenCVPlayground","createImage","loading","setLoading","toolState","setToolState","components","setComponents","handleToolChange","updateImage","message","accept","info","file","originFileObj","File","img","callback","reader","FileReader","readAsDataURL","getBase64","UploadOutlined","App","getCannyEdges","rest","minThreshold","maxThreshold","useL2Gradient","useRigidLines","lines","temp_components","red","green","blue","stroke","push","strokeWidth","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2311ef27.chunk.js","sourcesContent":["import styled from 'styled-components';\nimport { Layout } from 'antd';\n\nconst { Content } = Layout;\n\nexport const AppContainer = styled(Layout)`\n    width: 100%;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n`;\n\nexport const AppContent = styled(Content)`\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n`;","import { createGlobalStyle } from \"styled-components\";\n\nconst GlobalStyles = createGlobalStyle`\n    html, \n    body,\n    #root {\n        width: 100%;\n        height: 100%;\n        overflow: hidden;\n    }\n    body {\n        margin: 0px;\n        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n            'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n            sans-serif;\n        -webkit-font-smoothing: antialiased;\n        -moz-osx-font-smoothing: grayscale;\n    }\n`;\n\nexport default GlobalStyles;\n","import { useCallback, useEffect, useRef } from \"react\";\n\nfunction useIsMounted(): () => boolean {\n  const isMounted = useRef(false);\n\n  const checker = useCallback((): boolean => {\n    return isMounted.current;\n  }, []);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return function cleanup() {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return checker;\n}\n\nexport default useIsMounted;\n","import useIsMounted from \"../useIsMounted\";\n\n/** Creates a safe promise that will only resolve or reject if the component is still mounted */\nfunction usePromise(): <Result extends any = any>(\n  promise: Promise<Result>\n) => Promise<Result> {\n  const isMounted = useIsMounted();\n\n  function creator<Result extends any = any>(promise: Promise<Result>) {\n    return new Promise<Result>((resolve, reject) => {\n      promise\n        .then((result) => {\n          if (isMounted()) {\n            resolve(result);\n          }\n        })\n        .catch((error) => {\n          if (isMounted()) {\n            reject(error);\n          }\n        });\n    });\n  }\n\n  return creator;\n}\n\nexport default usePromise;\n","import { useCallback } from \"react\";\nimport axios from \"axios\";\nimport usePromise from \"../usePromise\";\n\nconst api_url =\n  \"https://bxjc2f8yt0.execute-api.us-east-2.amazonaws.com/calculate_canny_edges\";\n\ntype CannyEdgeApiArgs = {\n  url: string;\n  minThreshold: number;\n  maxThreshold: number;\n  useL2Gradient: boolean;\n  useRigidLines: boolean;\n};\n\ntype CannyEdgeApiResponse = {\n  url: string;\n  width: number;\n  height: number;\n};\n\ntype CannyEdgeApiJSON = {\n  points: number[][];\n};\n\nfunction useCannyEdges() {\n  const safePromise = usePromise();\n  \n  const getCannyEdges = useCallback(\n    async (body: CannyEdgeApiArgs) => {\n      try {\n        const { data: { url, width, height  } } = await safePromise(\n          axios.post<CannyEdgeApiResponse>(api_url, body)\n        );\n        const { data: { points } } = await safePromise(\n          axios.get<CannyEdgeApiJSON>(url)\n        );\n        return { points, width, height  };\n      } catch (error) {\n        return { points: [], width: 0, height: 0 };\n      }\n    },\n    [safePromise]\n  );\n\n  return getCannyEdges;\n}\n\nexport default useCannyEdges;\n","function randomInteger(min: number, max: number): number {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport default randomInteger;","function dataURItoBlob(dataURI: string) {\n    // convert base64 to raw binary data held in a string\n    // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this\n    var byteString = atob(dataURI.split(',')[1]);\n  \n    // separate out the mime component\n    var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]\n  \n    // write the bytes of the string to an ArrayBuffer\n    var ab = new ArrayBuffer(byteString.length);\n  \n    // create a view into the buffer\n    var ia = new Uint8Array(ab);\n  \n    // set the bytes of the buffer to the correct values\n    for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n  \n    return new Blob([ab], {type: mimeString});\n  \n  }\n\n  export default dataURItoBlob;","import dataURItoBlob from \"./../dataURItoBlob\";\n\nfunction downloadURI(uri: string, name: string) {\n\n    const blob = dataURItoBlob(uri);\n    const link = document.createElement('a');\n\n    link.download = name;\n    link.href = URL.createObjectURL(blob);\n\n    document.body.appendChild(link);\n\n    link.click();\n\n    document.body.removeChild(link);\n\n    URL.revokeObjectURL(link.href);\n\n};\n\nexport default downloadURI;","import React, { FunctionComponent, useContext, useEffect, useState } from 'react';\nimport downloadURI from '../../utils/downloadURI';\n\ntype Dimension = {\n    width: number;\n    height: number;\n};\n\ntype ImageProviderContextProps = {\n    downloadImage: VoidFunction;\n    setURI: (uri: string) => void;\n    setDimensions: (dimensions: Dimension) => void;\n    setStageRef: (ref: any) => void;\n    uri: string | null;\n    width: number;\n    height: number;\n    removeImage: VoidFunction;\n    image: HTMLImageElement | null;\n};\n\nconst ImageProviderContext = React.createContext<ImageProviderContextProps | undefined>(undefined);\n\nconst ImageProvider: FunctionComponent = ({ children }) => {\n    const [uri, setURI] = useState<string | null>(null);\n    const [image, setImage] = useState<HTMLImageElement | null>(null);\n    const [dimensions, setDimensions] = useState<Dimension>({ width: 0, height: 0 });\n    const [stageRef, setStageRef] = useState<any>(null);\n    const { width, height } = dimensions;\n    \n    const removeImage = () => {\n        setURI(null);\n        setDimensions({ width: 0, height: 0 });\n    }\n\n    const downloadImage = () => {\n        if (stageRef && uri && width && height) {\n    \n            const stageRefClone = stageRef.clone();\n            const containerGroup = stageRefClone.find(\"Group\").toArray()[0];\n                        \n            stageRefClone.width(width);\n            stageRefClone.height(height);\n    \n            containerGroup.scale({x: 1, y: 1});\n            containerGroup.x(0);\n            containerGroup.y(0);\n    \n            const uri = stageRefClone.toDataURL({\n                x: 0,\n                y: 0,\n                width: width,\n                height: height,\n                mimeType: \"image/png\",\n                quality: 1\n            });\n            \n            downloadURI(uri, \"image.png\");\n    \n        }\n      }\n\n    const value = {\n        setURI,\n        setStageRef,\n        uri,\n        setDimensions,\n        downloadImage,\n        width,\n        height,\n        removeImage,\n        image\n    };\n\n    useEffect(() => {\n        if (uri) {\n            const newImage = new Image();\n            newImage.onload = () => {\n                setImage(newImage);\n            };\n            newImage.src = uri;\n        }\n    }, [uri]);\n\n    return (\n        <ImageProviderContext.Provider value={value}>\n            {children}\n        </ImageProviderContext.Provider>\n    );\n}\n\nexport function useImageProvider(): ImageProviderContextProps {\n    const context = useContext(ImageProviderContext);\n\n    if (context === undefined) {\n        throw new Error('');\n    }\n\n    return context;\n}\n\nexport default ImageProvider;","import { Layout, Typography, Row } from \"antd\";\nimport styled from 'styled-components';\n\nconst { Header } = Layout;\n\nexport const HeaderContainer = styled(Header)`\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n`;\n\nexport const HeaderLogo = styled(Typography.Title)`\n    && {\n        color: #ffffff;\n        margin: 0px;\n        font-size: 24px;\n    }\n`;\n\nexport const HeaderRow = styled(Row)`\n    width: 100%;\n`;\n\n","import React from \"react\";\nimport { Button, Space } from \"antd\";\nimport { DownloadOutlined, CloseOutlined } from \"@ant-design/icons\";\nimport useBreakpoint from \"antd/lib/grid/hooks/useBreakpoint\";\nimport { useImageProvider } from \"../../providers/ImageProvider\";\nimport { HeaderContainer, HeaderLogo, HeaderRow } from \"./Header.styled\";\n\nconst Header = () => {\n  const screens = useBreakpoint();\n  const isSmallScreen =\n    Object.entries(screens).filter(\n      (screen) => screen[1] === true && screen[0] === \"xs\"\n    ).length === 1;\n  const { downloadImage, removeImage, uri } = useImageProvider();\n\n  return (\n    <HeaderContainer>\n      <HeaderRow align=\"middle\" justify=\"space-between\">\n        <HeaderLogo level={1}>JerryWithaZ</HeaderLogo>\n        <Space size={[8, 0]}>\n          {uri && (\n            <Button\n              type=\"default\"\n              onClick={removeImage}\n              icon={\n                isSmallScreen ? <CloseOutlined color=\"#ffffff\" /> : undefined\n              }\n            >\n              {isSmallScreen ? null : \"Remove Image\"}\n            </Button>\n          )}\n          <Button\n            type=\"primary\"\n            onClick={downloadImage}\n            icon={\n              isSmallScreen ? <DownloadOutlined color=\"#ffffff\" /> : undefined\n            }\n          >\n            {isSmallScreen ? null : \"Download Image\"}\n          </Button>\n        </Space>\n      </HeaderRow>\n    </HeaderContainer>\n  );\n};\n\nexport default Header;\n","import { useRef, useEffect } from \"react\";\n\n/**\n * Custom hook for storing the previous value of some data\n * for comparison.\n * @param value The initial value.\n */\nfunction usePrevious<Value>(value: Value): Value | undefined {\n    const ref = useRef<Value>();\n\n    useEffect(() => {\n        ref.current = value;\n    });\n\n    return ref.current;\n}\n\nexport default usePrevious;\n","import { useEffect } from \"react\";\nimport usePrevious from \"../usePrevious\";\n\n/**\n * A custom hook to check if a prop has changed value.\n * This hook uses shallow comparison.\n * @param currentValue The current value\n * @param onChange The callback to execute if the prop changes.\n */\nfunction useOnPropUpdated<Value>(\n    currentValue: Value,\n    onChange: (prev?: Value, current?: Value) => void\n): void {\n    const previousValue = usePrevious<Value>(currentValue);\n\n    useEffect(() => {\n        if (previousValue !== undefined && previousValue !== currentValue) {\n            onChange(previousValue, currentValue);\n        }\n    }, [currentValue, previousValue, onChange]);\n}\n\nexport default useOnPropUpdated;","\nfunction calculateAspectRatioFit(srcWidth: number, srcHeight: number, maxWidth: number, maxHeight: number) {\n\n    var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight);\n  \n    return { \n        ratio: ratio,\n        width: srcWidth*ratio, \n        height: srcHeight*ratio \n    };\n  \n}\n\nexport default calculateAspectRatioFit;","import { useCallback, useEffect, useRef, useState } from \"react\";\nimport calculateAspectRatioFit from \"../../utils/calculateAspectRatioFit\";\n\nfunction useZoomAndPan() {\n  const ref = useRef<HTMLDivElement | null>(null);\n  const [state, setState] = useState({\n    x: 0,\n    y: 0,\n    scale: 1,\n    width: 0,\n    height: 0,\n    scaleFactor: 1.25,\n    mouse: {\n      x: 0,\n      y: 0,\n      dragging: false,\n    },\n  });\n\n  const fitToContainer = (\n    containerWidth: number,\n    containerHeight: number,\n    alignCenter: boolean = true,\n    referenceWidth?: number,\n    referenceHeight?: number\n  ) => {\n    if (ref.current) {\n      const refWidth =\n        referenceWidth !== undefined ? referenceWidth : ref.current.clientWidth;\n      const refHeight =\n        referenceHeight !== undefined\n          ? referenceHeight\n          : ref.current.clientHeight;\n\n      const { width, height } = calculateAspectRatioFit(\n        refWidth,\n        refHeight,\n        containerWidth,\n        containerHeight\n      );\n\n      const scale = width / refWidth;\n      const newScale = scale > 1 ? 1 : scale;\n      const newWidth = scale > 1 ? refWidth : width;\n      const newHeight = scale > 1 ? refHeight : height;\n      const newX = alignCenter ? (containerWidth - newWidth) / 2 : 0;\n      const newY = alignCenter ? (containerHeight - newHeight) / 2 : 0;\n\n      setState({\n        ...state,\n        scale: newScale,\n        width: newWidth,\n        height: newHeight,\n        x: newX,\n        y: newY,\n      });\n    }\n  };\n\n  const pan = useCallback(\n    (e: MouseEvent) => {\n      const { mouse, x, y } = state;\n      const offsetX = e.clientX - mouse.x + x;\n      const offsetY = e.clientY - mouse.y + y;\n\n      e.preventDefault();\n\n      setState({\n        ...state,\n        mouse: {\n          dragging: true,\n          x: e.clientX,\n          y: e.clientY,\n        },\n        x: offsetX,\n        y: offsetY,\n      });\n    },\n    [state]\n  );\n\n  const zoom = useCallback(\n    (zoomIn: boolean, reset: boolean = false) => {\n      const { scale, scaleFactor } = state;\n\n      let newScale = scale;\n\n      if (reset) {\n        newScale = 1;\n      } else {\n        if (zoomIn) {\n          newScale *= scaleFactor;\n        } else if (newScale > 0.1) {\n          newScale /= scaleFactor;\n        }\n      }\n\n      setState({\n        ...state,\n        scale: newScale,\n      });\n    },\n    [state]\n  );\n\n  const onMouseDown = useCallback(\n    (e: MouseEvent) => {\n      setState({\n        ...state,\n        mouse: {\n          x: e.clientX,\n          y: e.clientY,\n          dragging: true,\n        },\n      });\n    },\n    [state]\n  );\n\n  const onMouseMove = useCallback(\n    (e: MouseEvent) => {\n      requestAnimationFrame(() => {\n        const mouseIsMoving = state.mouse.dragging;\n        const wasLeftClick = e.buttons === 1;\n        if (mouseIsMoving && wasLeftClick) {\n          pan(e);\n        }\n      });\n    },\n    [pan, state.mouse.dragging]\n  );\n\n  const onMouseUp = useCallback(\n    (e: MouseEvent) => {\n      setState({\n        ...state,\n        mouse: {\n          x: 0,\n          y: 0,\n          dragging: false,\n        },\n      });\n    },\n    [state]\n  );\n\n  const onMouseWheel = useCallback(\n    (e: WheelEvent) => {\n      requestAnimationFrame(() => {\n        if (ref.current && ref.current.parentElement) {\n          const { scale, x, y, scaleFactor } = state;\n\n          const mouseX = e.pageX - ref.current.parentElement.offsetLeft;\n          const mouseY = e.pageY - ref.current.parentElement.offsetTop;\n\n          const mousePointTo = {\n            x: mouseX / scale - x / scale,\n            y: mouseY / scale - y / scale,\n          };\n\n          const newScale =\n            e.deltaY > 0 ? scale * scaleFactor : scale / scaleFactor;\n\n          const newPosition = {\n            x: -(mousePointTo.x - mouseX / newScale) * newScale,\n            y: -(mousePointTo.y - mouseY / newScale) * newScale,\n          };\n\n          setState({\n            ...state,\n            x: newPosition.x,\n            y: newPosition.y,\n            scale: newScale,\n          });\n        }\n      });\n    },\n    [state]\n  );\n\n  const addEventListeners = useCallback(() => {\n    if (ref.current) {\n      ref.current.addEventListener(\"wheel\", onMouseWheel);\n      ref.current.addEventListener(\"mousedown\", onMouseDown);\n      ref.current.addEventListener(\"mousemove\", onMouseMove);\n      ref.current.addEventListener(\"mouseup\", onMouseUp);\n    }\n  }, [onMouseDown, onMouseMove, onMouseUp, onMouseWheel]);\n\n  const removeEventListeners = useCallback(() => {\n    if (ref.current) {\n      ref.current.removeEventListener(\"wheel\", onMouseWheel);\n      ref.current.removeEventListener(\"mousedown\", onMouseDown);\n      ref.current.removeEventListener(\"mousemove\", onMouseMove);\n      ref.current.removeEventListener(\"mouseup\", onMouseUp);\n    }\n  }, [onMouseDown, onMouseMove, onMouseUp, onMouseWheel]);\n\n  const setZoomRef = useCallback(\n    (el: HTMLDivElement | null) => {\n      if (el) {\n        ref.current = el;\n        addEventListeners();\n      }\n    },\n    [addEventListeners]\n  );\n\n  useEffect(() => {\n    return function cleanup() {\n      removeEventListeners();\n    };\n  }, [removeEventListeners]);\n\n  return { setZoomRef, zoom, pan, fitToContainer, ...state };\n}\n\nexport default useZoomAndPan;\n","import styled from 'styled-components';\n\nexport const CanvasContainer = styled.div`\n    width: 100%;\n    flex: 1;\n`;","import React, { FunctionComponent, useCallback, useState } from \"react\";\nimport { Group, Layer, Stage, Rect } from \"react-konva\";\nimport useOnPropUpdated from \"../../hooks/useOnPropUpdated\";\nimport useZoomAndPan from \"../../hooks/useZoomAndPan\";\nimport { useImageProvider } from \"../../providers/ImageProvider\";\nimport { CanvasContainer } from \"./Canvas.styled\";\n\ntype CanvasProps = {\n  width: number;\n  height: number;\n};\n\nconst Canvas: FunctionComponent<CanvasProps> = ({\n  children,\n  width,\n  height,\n}) => {\n  const [containerWidth, setContainerWidth] = useState<number>(0);\n  const [containerHeight, setContainerHeight] = useState<number>(0);\n  const { setStageRef, image } = useImageProvider();\n  const { scale, x, y, setZoomRef, fitToContainer } = useZoomAndPan();\n\n  const handleRef = useCallback(\n    (el: HTMLDivElement | null) => {\n      if (el) {\n        setContainerWidth(el.clientWidth);\n        setContainerHeight(el.clientHeight);\n        setZoomRef(el);\n      }\n    },\n    [setZoomRef]\n  );\n\n  useOnPropUpdated(image, (_, currentImage) => {\n    if (currentImage) {\n        fitToContainer(\n            containerWidth,\n            containerHeight,\n            true,\n            currentImage.naturalWidth,\n            currentImage.naturalHeight,\n        );\n    }\n  });\n\n  return (\n    <CanvasContainer ref={handleRef}>\n      <Stage height={containerHeight} width={containerWidth} ref={setStageRef}>\n        <Layer>\n          <Group\n            height={height * scale}\n            width={width * scale}\n            scale={{ x: scale, y: scale }}\n            x={x}\n            y={y}\n          >\n            <Rect\n              x={0}\n              y={0}\n              width={width}\n              height={height}\n              fillLinearGradientStartPoint={{ x: 0, y: height / 2 }}\n              fillLinearGradientEndPoint={{ x: width, y: height / 2 }}\n              fillLinearGradientColorStops={[0, \"#1D2951\", 1, \"#000000\"]}\n            />\n            {children}\n          </Group>\n        </Layer>\n      </Stage>\n    </CanvasContainer>\n  );\n};\n\nexport default Canvas;\n","import styled from 'styled-components';\nimport { Layout } from \"antd\";\n\nexport const OpenCVPlaygroundWrapper = styled(Layout)`\n    height: 100%;\n`;\n\nexport const OpenCVPlaygroundContent = styled(Layout.Content)`\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n    position: relative;\n`;\n\nexport const OpenCVPlaygroundUpload = styled.div`\n    padding: 32px;\n`;","import styled from 'styled-components';\nimport { Layout } from \"antd\";\n\nconst { Sider } = Layout;\n\nexport const SidebarContainer = styled(Sider)`\n    padding: 32px 32px;\n    &.ant-layout-sider-collapsed {\n        padding: 0px;\n    }\n    .ant-layout-sider-zero-width-trigger {\n        top: 0px;\n    }\n`;","import styled from 'styled-components';\n\nexport const ToggleContainer = styled.div`\n    display: flex;\n    align-items: center;\n`;","import React from \"react\";\nimport { Switch, Form } from \"antd\";\nimport { OpenCvPlaygroundToggleTool } from \"../OpenCVPlayground.types\";\nimport { ToggleContainer } from \"./Toggle.styled\";\n\ntype ToggleProps = Pick<OpenCvPlaygroundToggleTool, \"initialValue\" | \"name\"> & {\n  value: boolean;\n  onChange: (checked: boolean) => void;\n};\n\nconst Toggle = ({ initialValue, value, onChange, name }: ToggleProps) => {\n  return (\n    <ToggleContainer as={Form.Item} label={name}>\n      <Switch\n        defaultChecked={initialValue}\n        checked={value}\n        onChange={onChange}\n      />\n    </ToggleContainer>\n  );\n};\n\nexport default Toggle;\n","import React, { useState } from \"react\";\nimport debounce from 'lodash/debounce';\nimport { Slider, Form } from \"antd\";\nimport { OpenCvPlaygroundRangeTool } from \"../OpenCVPlayground.types\";\n\ntype RangeProps = Pick<\n  OpenCvPlaygroundRangeTool,\n  \"initialValue\" | \"name\" | \"min\" | \"max\"\n> & {\n  value: number;\n  onChange: (value: number) => void;\n};\n\nconst Range = ({\n  name,\n  initialValue,\n  onChange,\n  min,\n  max,\n}: RangeProps) => {\n  const [internalValue, setInternalValue] = useState<number>(initialValue);\n  return (\n    <Form.Item label={`${name} (${internalValue}/${max})`} labelCol={{ span: 24 }}>\n      <Slider\n        defaultValue={initialValue}\n        value={internalValue}\n        onChange={setInternalValue}\n        onAfterChange={debounce(onChange, 500)}\n        min={min}\n        max={max}\n      />\n    </Form.Item>\n  );\n};\n\nexport default Range;\n","import React, { FunctionComponent } from \"react\";\nimport { SidebarContainer } from \"./Sidebar.styled\";\nimport { OpenCvPlaygroundTools } from \"../OpenCVPlayground.types\";\nimport Toggle from \"../Toggle\";\nimport Range from \"../Range\";\n\ntype SideBarProps = {\n  onToolChange: (key: string, value: any) => void;\n  tools: OpenCvPlaygroundTools[];\n  values: Record<string, any>;\n};\n\nconst Sidebar: FunctionComponent<SideBarProps> = ({\n  tools,\n  onToolChange,\n  values,\n}) => {\n  return (\n    <SidebarContainer\n      width={300}\n      theme=\"light\"\n      breakpoint=\"md\"\n      collapsedWidth=\"0\"\n    >\n      {tools.map((tool) => {\n        if (tool.type === \"toggle\") {\n          return (\n            <Toggle\n              key={tool.key}\n              initialValue={tool.initialValue}\n              onChange={(value) => onToolChange(tool.key, value)}\n              value={values[tool.key]}\n              name={tool.name}\n            />\n          );\n        }\n        if (tool.type === \"range\") {\n          return (\n            <Range\n              key={tool.key}\n              initialValue={tool.initialValue}\n              onChange={(value) => onToolChange(tool.key, value)}\n              value={values[tool.key]}\n              name={tool.name}\n              max={tool.max}\n              min={tool.min}\n            />\n          );\n        }\n        return null;\n      })}\n    </SidebarContainer>\n  );\n};\n\nexport default Sidebar;\n","import styled from 'styled-components';\n\nexport const SpinnerContainer = styled.div`\n    position: absolute;\n    z-index: 2;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    height: 100%;\n    background: #f0f2f5;\n`;\n","import React from \"react\";\nimport { Spin, Typography } from \"antd\";\nimport { SpinnerContainer } from \"./Spinner.styled\";\n\nconst Spinner = () => {\n  return (\n    <SpinnerContainer>\n      <Spin size=\"large\" />\n      <Typography.Text>\n          Generating your image..\n      </Typography.Text>\n    </SpinnerContainer>\n  );\n};\n\nexport default Spinner;\n","import React, {\n  FunctionComponent,\n  useCallback,\n  useEffect,\n  useState,\n} from \"react\";\nimport { Upload, message, Button } from \"antd\";\nimport { UploadChangeParam } from \"antd/lib/upload\";\nimport { UploadFile } from \"antd/lib/upload/interface\";\nimport { UploadOutlined } from \"@ant-design/icons\";\nimport { useImageProvider } from \"../../providers/ImageProvider\";\nimport Canvas from \"../Canvas\";\nimport {\n  OpenCVPlaygroundContent,\n  OpenCVPlaygroundUpload,\n  OpenCVPlaygroundWrapper,\n} from \"./OpenCVPlayground.styled\";\nimport { OpenCvPlaygroundProps } from \"./OpenCVPlayground.types\";\nimport Sidebar from \"./Sidebar\";\nimport Spinner from \"./Spinner\";\n\nfunction getBase64(\n  img: File,\n  callback: (result: string | ArrayBuffer | null) => void\n) {\n  const reader = new FileReader();\n  reader.addEventListener(\"load\", () => callback(reader.result));\n  reader.readAsDataURL(img);\n}\n\nconst OpenCVPlayground: FunctionComponent<OpenCvPlaygroundProps> = ({\n  tools,\n  createImage,\n}) => {\n  const { setURI, setDimensions, width, height, uri } = useImageProvider();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [toolState, setToolState] = useState<Record<string, unknown>>({});\n  const [components, setComponents] = useState<React.ReactNode>(null);\n\n  const handleToolChange = useCallback(\n    (key: string, value: any) => {\n      setToolState({\n        ...toolState,\n        [key]: value,\n      });\n    },\n    [toolState]\n  );\n\n  const updateImage = useCallback(\n    (url: string) => {\n      setLoading(true);\n      createImage({\n        ...toolState,\n        url,\n      })\n        .then(({ width, height, image }) => {\n          setDimensions({ width, height });\n          setComponents(image);\n          setLoading(false);\n        })\n        .catch(() => {\n          message.error(\"There was an error creating your image\");\n          setLoading(false);\n        });\n    },\n    [createImage, setDimensions, toolState]\n  );\n\n  const handleUpload = (info: UploadChangeParam<UploadFile<any>>) => {\n    if (info.file.originFileObj instanceof File) {\n      getBase64(info.file.originFileObj, (url) => {\n        if (typeof url === \"string\") {\n          setURI(url);\n        } else {\n          message.error(\"You can only upload images.\");\n        }\n      });\n    } else {\n      message.error(\"You can only upload images.\");\n    }\n  };\n\n  useEffect(() => {\n    if (uri) updateImage(uri);\n  }, [uri, toolState, updateImage]);\n\n  return (\n    <OpenCVPlaygroundWrapper>\n      <Sidebar\n        tools={tools}\n        onToolChange={handleToolChange}\n        values={toolState}\n      />\n      <OpenCVPlaygroundContent>\n        {!uri ? (\n          <OpenCVPlaygroundUpload>\n            <Upload accept=\"image/*\" onChange={handleUpload}>\n              <Button icon={<UploadOutlined />}>\n                Click to Upload an Image\n              </Button>\n            </Upload>\n          </OpenCVPlaygroundUpload>\n        ) : (\n          <Canvas width={width} height={height}>\n            {components}\n          </Canvas>\n        )}\n        {loading && <Spinner />}\n      </OpenCVPlaygroundContent>\n    </OpenCVPlaygroundWrapper>\n  );\n};\n\nexport default OpenCVPlayground;\n","import React, { useCallback } from \"react\";\nimport { Line } from \"react-konva\";\nimport { AppContainer } from \"./App.styled\";\nimport GlobalStyles from \"./components/GlobalStyles\";\nimport useCannyEdges from \"./hooks/useCannyEdges\";\nimport randomInteger from \"./utils/randomInteger\";\nimport Header from \"./features/Header\";\nimport OpenCVPlayground from \"./components/OpenCVPlayground\";\n\nfunction App() {\n  const getCannyEdges = useCannyEdges();\n\n  const createImage = useCallback(\n    async ({ url, ...rest }: { url: string } & Record<string, any>) => {\n      const { points: lines, width, height } = await getCannyEdges({\n        url,\n        minThreshold: 50,\n        maxThreshold: 100,\n        useL2Gradient: true,\n        useRigidLines: true,\n        ...rest,\n      });\n      const temp_components = [];\n\n      for (let i = 0; i < lines.length; ++i) {\n        const points = lines[i];\n\n        const red = randomInteger(0, 255);\n        const green = randomInteger(0, 255);\n        const blue = randomInteger(0, 255);\n        const stroke = `rgb(${red}, ${green}, ${blue})`;\n\n        temp_components.push(\n          <Line key={i} points={points} stroke={stroke} strokeWidth={2} />\n        );\n      }\n      return { width, height, image: temp_components };\n    },\n    [getCannyEdges]\n  );\n\n  return (\n    <AppContainer>\n      <GlobalStyles />\n      <Header />\n      <OpenCVPlayground\n        tools={[\n          {\n            name: \"Min Threshold\",\n            type: \"range\",\n            key: \"minThreshold\",\n            initialValue: 50,\n            min: 0,\n            max: 100,\n          },\n          {\n            name: \"Max Threshold\",\n            type: \"range\",\n            key: \"maxThreshold\",\n            initialValue: 100,\n            min: 0,\n            max: 200,\n          },\n          {\n            name: \"Use L2 Gradient\",\n            type: \"toggle\",\n            key: \"useL2Gradient\",\n            initialValue: true,\n          },\n          {\n            name: \"Use Rigid Lines\",\n            type: \"toggle\",\n            key: \"useRigidLines\",\n            initialValue: true,\n          },\n        ]}\n        createImage={createImage}\n      />\n    </AppContainer>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport ImageProvider from './providers/ImageProvider';\nimport reportWebVitals from './reportWebVitals';\n\nimport 'antd/dist/antd.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ImageProvider>\n      <App />\n    </ImageProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}